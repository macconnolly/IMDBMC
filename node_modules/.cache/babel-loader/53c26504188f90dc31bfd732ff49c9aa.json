{"ast":null,"code":"import _classCallCheck from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/macconnolly/CS/bnbcleanings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/macconnolly/CS/bnbcleanings/src/components/cleanerDetail.js\";\nimport React, { Component } from 'react';\nimport { CardColumns, Col, Image, ListGroup, Nav, Row, Tab, Modal, Button, Form, DropdownButton, Dropdown, Table } from 'react-bootstrap';\nimport { fetchAllProperties, updateSelectedMovie, createReview } from '../actions/movieActions';\nimport { connect } from \"react-redux\";\nimport { replace, push } from 'connected-react-router';\nimport Card from \"react-bootstrap/Card\";\nimport Container from \"react-bootstrap/Container\";\nimport Cookies from 'js-cookie';\nimport '../App.css';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\n\nvar CleanerDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CleanerDetail, _Component);\n\n  function CleanerDetail(props) {\n    var _this;\n\n    _classCallCheck(this, CleanerDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CleanerDetail).call(this, props));\n\n    _this.handleOnSelectRating = function (eventKey, event) {\n      _this.setState({\n        reviewRating: eventKey\n      });\n\n      console.log('rating: ' + _this.state.reviewRating);\n    };\n\n    _this.handleOnChangeReviewBody = function (event) {\n      _this.setState({\n        reviewBody: event.target.value\n      });\n\n      console.log('review: ' + _this.state.reviewBody);\n    };\n\n    _this.handleOnChangeSelectedOption = function (e) {\n      console.log('value of e is ' + e);\n\n      _this.props.dispatch(updateSelectedMovie(e));\n\n      _this.props.dispatch(replace('/properties/#/' + e));\n    };\n\n    _this.handleShow = _this.handleShow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getProperties = _this.getProperties.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getAllCleaners = _this.getAllCleaners.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.lookupProperty = _this.lookupProperty.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggleBox = _this.toggleBox.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    var products = [];\n    var columns = [{\n      dataField: 'propertyName',\n      text: 'Name'\n    }, {\n      dataField: 'startDate',\n      text: 'Start'\n    }, {\n      dataField: 'endDate',\n      text: 'Deadline'\n    }, {\n      dataField: 'cleaned',\n      text: 'Status',\n      editor: {\n        type: Type.CHECKBOX,\n        value: 'true:false'\n      }\n    }];\n    _this.state = {\n      show: false,\n      reviewRating: 'Select rating',\n      reviewBody: '',\n      cleanings: [],\n      columns: columns,\n      isOpened: false\n    };\n    return _this;\n  } // handleSelect(key) {\n  //     console.log('selected' + key);\n  //     this.setState({ key: key });\n  // }\n\n\n  _createClass(CleanerDetail, [{\n    key: \"toggleBox\",\n    value: function toggleBox() {\n      this.setState(function (oldState) {\n        return {\n          isOpened: !oldState.isOpened\n        };\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      var token = Cookies.get('token');\n      var data = {\n        reviewBody: this.state.reviewBody,\n        reviewScore: this.state.reviewRating,\n        movieID: this.props.selectedOption\n      };\n      this.props.dispatch(createReview(data, token));\n      this.setState({\n        show: false,\n        reviewRating: 'Select rating',\n        reviewBody: ''\n      });\n      this.props.dispatch(fetchAllProperties());\n    }\n  }, {\n    key: \"handleShow\",\n    value: function handleShow() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"lookupProperty\",\n    value: function lookupProperty(id) {\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      var property = {};\n      fetch(\"http://localhost:8080/properties/\".concat(id), parameters).then(function (response) {\n        console.log('properties fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('properties fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log('this is my ref' + json.properties);\n        property = json.properties;\n        return json;\n      });\n      console.log('property' + property);\n      console.log(property);\n      return property;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var hash = this.props.hash.substr(2);\n      var currentCleanerID = hash;\n      console.log('hash: ' + hash);\n      console.log('selectedOption: ' + currentCleanerID); // if (this.props.hash !== \"\" && currentCleanerID === \"\"){\n      //     this.props.dispatch(updateSelectedMovie(hash));\n      // }\n      // this.props.dispatch(fetchAllProperties());\n\n      this.getAllCleanings();\n      this.getAllProperties();\n      this.getAllCleaners();\n      this.getCurrentCleanerInfo();\n      this.getFutureCleanings();\n      console.log('comp will mount cleanerdetail');\n      console.log(this.props); //\n      // console.log('Component WILL MOUNT!');\n      // console.log('hash: ' + this.props.hash)\n      // console.log('selected option: ' + this.props.selectedOption);\n      // //this.props.dispatch(fetchAllProperties(checkCookie()));\n      // console.log('selected option: ' + this.props.selectedOption);\n      // if(this.props.selectedOption === \"\"){\n      //\n      //     this.props.dispatch(fetchAllProperties(checkCookie()));\n      //     this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)));\n      // }\n      // else {\n      //\n      //     this.props.dispatch(updateSelectedMovie(this.props.selectedOption));\n      //\n      // }\n      //updateSelectedMovie(this.props.hash.substr(2));\n      // console.log('selected option: ' + this.props.selectedOption);\n      //\n      //this.props.dispatch(fetchAllProperties(checkCookie()));\n    }\n  }, {\n    key: \"getCurrentDate\",\n    value: function getCurrentDate(separator) {\n      var newDate = new Date();\n      var date = newDate.getDate();\n      var month = newDate.getMonth() + 1;\n      var year = newDate.getFullYear();\n      return \"\".concat(year).concat(separator).concat(month < 10 ? \"0\".concat(month) : \"\".concat(month)).concat(separator).concat(date);\n    }\n  }, {\n    key: \"getAllCleanings\",\n    value: function getAllCleanings() {\n      var _this2 = this;\n\n      var hash = this.props.hash.substr(2);\n      var currentCleanerID = hash; //?start=${this.getCurrentDate('-')}&end=${this.getCurrentDate('-')}\n\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch(\"http://localhost:8080/cleaners/\".concat(currentCleanerID, \"/cleanings?start=\").concat(this.getCurrentDate('-'), \"&end=\").concat(this.getCurrentDate('-')), parameters).then(function (response) {\n        console.log('cleaners fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('cleaners fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log(data.cleaners);\n\n        _this2.setState({\n          \"cleanings\": data.cleanings,\n          \"cleanerID\": currentCleanerID\n        });\n\n        return json;\n      });\n    }\n  }, {\n    key: \"getFutureCleanings\",\n    value: function getFutureCleanings() {\n      var _this3 = this;\n\n      var hash = this.props.hash.substr(2);\n      var currentCleanerID = hash; //?start=${this.getCurrentDate('-')}&end=${this.getCurrentDate('-')}\n\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch(\"http://localhost:8080/cleaners/\".concat(currentCleanerID, \"/cleanings?start=\").concat(this.getCurrentDate('-')), parameters).then(function (response) {\n        console.log('cleaners fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('cleaners fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log(data.cleaners);\n\n        _this3.setState({\n          \"futureCleanings\": data.cleanings\n        });\n\n        return json;\n      });\n    }\n  }, {\n    key: \"getAllProperties\",\n    value: function getAllProperties() {\n      var _this4 = this;\n\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch(\"http://localhost:8080/properties?cleanings=true\", parameters).then(function (response) {\n        console.log('properties fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('cleaners fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log(data.cleaners);\n\n        _this4.setState({\n          \"properties\": data.properties\n        });\n\n        return json;\n      });\n    }\n  }, {\n    key: \"getAllCleaners\",\n    value: function getAllCleaners() {\n      var _this5 = this;\n\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch('http://localhost:8080/cleaners', parameters).then(function (response) {\n        console.log('property fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('property fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log(data.cleaners);\n\n        _this5.setState({\n          \"cleaners\": data.cleaners\n        });\n\n        return json;\n      });\n    }\n  }, {\n    key: \"getCurrentCleanerInfo\",\n    value: function getCurrentCleanerInfo() {\n      var _this6 = this;\n\n      var hash = this.props.hash.substr(2);\n      var currentCleanerID = hash;\n      var parameters = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch(\"http://localhost:8080/cleaners/\".concat(currentCleanerID), parameters).then(function (response) {\n        console.log('property fetch callback json first response: ' + JSON.stringify(response));\n        return response.json();\n      }).then(function (json) {\n        console.log('property fetch callback json response' + JSON.stringify(json));\n        var data = JSON.parse(JSON.stringify(json));\n        console.log(data.cleaners);\n\n        _this6.setState({\n          \"currentCleaner\": data.cleaners[0]\n        });\n\n        return json;\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      //console.log('comp will receive props: ' )\n      console.log('willReceiveProps');\n      console.log(newProps); //var newPropsObject = JSON.parse(newProps);\n      //var result = newPropsObject[0];\n      //console.log(JSON.parse(newProps))\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate(nextProps, nextState) {\n      console.log('comp will update');\n      console.log(nextProps); //this.handleOnChangeSelectedOption(this.props.hash.substr(2))\n      // if(this.props.selectedOption === \"\"){\n      //     this.props.dispatch(updateSelectedMovie(nextProps.propertyList.titles[0]._id));\n      // }\n\n      var hash = this.props.hash.substr(2);\n      var currentPropertyID = this.props.selectedOption;\n\n      if (hash === '' && currentPropertyID == '') {\n        var m = nextProps.propertyList.titles[0]._id;\n        console.log(m);\n        this.handleOnChangeSelectedOption(m);\n      } //const firstMovie = JSON.parse(nextProps.propertyList[0]._id)\n      //this.handleOnChangeSelectedOption(firstMovie)\n      // console.log('comp will update')\n      // if(this.props.selectedOption === '') {\n      //     let firstMovie = nextProps.propertyList[0]._id\n      //     this.handleOnChangeSelectedOption(firstMovie);\n      // }\n\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {// updateSelectedMovie(prevProps.hash.substr(2))\n      // console.log('new debug')\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      console.log('comp will unmount');\n      console.log(this.props);\n    } // handleOnLoadMovies = (token) => {\n    //     this.handleOnChangeSelectedOption(this.props.selectedOption || this.props.hash.substr(2));\n    //     this.props.dispatch(fetchAllProperties(token));\n    //\n    //\n    //\n    // };\n\n  }, {\n    key: \"getProperties\",\n    value: function getProperties() {// // if (this.state.cleanings !== undefined && this.state.properties !== undefined) {\n      // //\n      // //\n      // //     let newCleanings = this.state.cleanings.map(obj=> (\n      // //         { ...obj, propertyName: this.state.properties.find( property => property._id === obj.property ).name }\n      // //     ));\n      // //     newCleanings = newCleanings.map(obj=> (\n      // //         { ...obj, endDate: new Date(obj.end).toLocaleDateString() }\n      // //     ));\n      // //     newCleanings = newCleanings.map(obj=> (\n      // //         { ...obj, startDate: new Date(obj.start).toLocaleDateString() }\n      // //     ));\n      // //\n      // //\n      // //\n      // //     return newCleanings;\n      //\n      // }\n      // else\n      //     return []\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log('comp did mount state');\n      console.log(this.state); // console.log(this.props);\n      // this.props.dispatch(fetchAllProperties());\n      //\n      // let hash = this.props.hash.substr(2);\n      // let currentPropertyID = this.props.selectedOption;\n      //\n      // if(hash === '' && currentPropertyID == ''){\n      //     let m = this.propertyList.titles[0]._id\n      //     console.log(m)\n      //     this.handleOnChangeSelectedOption(m);\n      // }\n      //this.props.dispatch(fetchAllProperties(checkCookie()));\n      //this.props.dispatch(updateSelectedMovie(this.props.selectedOption));\n      //this.props.dispatch(replace('/movies/#/' + this.props.selectedOption));\n      //console.log('comp did mount')\n      //this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)));\n    }\n  }, {\n    key: \"render\",\n    // handleOnLoadMovies = (token) => {\n    //     this.props.dispatch(fetchAllProperties(token)).then((response) => {\n    //         console.log('MOVIES RETURNED - UPDATE STATE' + response);\n    //         this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)))\n    //\n    //     }).catch((error) => {\n    //         console.log('ERROR')\n    //     }));\n    //\n    // };\n    value: function render() {\n      var _this7 = this;\n\n      return React.createElement(Container, {\n        className: \"movie-list-tabbed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, React.createElement(Tab.Container, {\n        id: \"moviestabs\",\n        defaultActiveKey: \"a\",\n        activeKey: this.props.selectedOption,\n        mountOnEnter: false,\n        onSelect: function onSelect(e) {\n          return _this7.handleOnChangeSelectedOption(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 9,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472\n        },\n        __self: this\n      }, this.state.currentCleaner && this.state.cleanings && this.state.cleaners && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, \"Hi \", this.state.currentCleaner.name, \"!\"), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }, \" You have \", this.state.cleanings.length, \" \", this.state.cleanings.length === 1 ? 'property' : 'properties', \" to clean today\")), this.state.cleanings && this.state.properties && this.state.cleaners && this.state.cleanings.map(function (cleaning, index) {\n        return React.createElement(React.Fragment, null, React.createElement(Card, {\n          body: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, Date.now().toString(), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487\n          },\n          __self: this\n        }, \"Name:\"), \" \", _this7.state.properties.find(function (property) {\n          return property._id === cleaning.property;\n        }).name), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488\n          },\n          __self: this\n        }, \"Address:\"), \" \", _this7.state.properties.find(function (property) {\n          return property._id === cleaning.property;\n        }).address), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 489\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 489\n          },\n          __self: this\n        }, \"Date to Clean:\"), \" \", new Date(cleaning.start).toLocaleDateString()), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490\n          },\n          __self: this\n        }, \"Latest Cleaning Deadline:\"), \" \", new Date(cleaning.end).toLocaleDateString()), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491\n          },\n          __self: this\n        }, \"Current Status:\"), \" \", cleaning.cleaned ? 'Clean' : 'Not Clean')), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 495\n          },\n          __self: this\n        }));\n      }), React.createElement(Button, {\n        type: \"primary\",\n        className: \"boxTitle\",\n        onClick: this.toggleBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501\n        },\n        __self: this\n      }, \"Show/Hide Future Cleanings\"), this.state.futureCleanings && this.state.properties && this.state.cleaners && this.state.isOpened && this.state.futureCleanings.map(function (cleaning, index) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }, React.createElement(Card, {\n          body: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507\n          },\n          __self: this\n        }, Date.now().toString(), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 509\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 509\n          },\n          __self: this\n        }, \"Name:\"), \" \", _this7.state.properties.find(function (property) {\n          return property._id === cleaning.property;\n        }).name), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 510\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 510\n          },\n          __self: this\n        }, \"Address:\"), \" \", _this7.state.properties.find(function (property) {\n          return property._id === cleaning.property;\n        }).address), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 511\n          },\n          __self: this\n        }, \"Date to Clean:\"), \" \", new Date(cleaning.start).toLocaleDateString()), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }, \"Latest Cleaning Deadline:\"), \" \", new Date(cleaning.end).toLocaleDateString()), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513\n          },\n          __self: this\n        }, \"Current Status:\"), \" \", cleaning.cleaned ? 'Clean' : 'Not Clean')), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 517\n          },\n          __self: this\n        }));\n      })))), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, \"Create Review\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"reviewForm.reviewBody\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, \"Movie Review\"), React.createElement(Form.Control, {\n        onChange: function onChange(e) {\n          return _this7.handleOnChangeReviewBody(e);\n        },\n        type: \"text\",\n        id: \"reviewBody\",\n        as: \"textarea\",\n        rows: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"reviewForm.rating\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545\n        },\n        __self: this\n      }, \"Rating\"), React.createElement(DropdownButton, {\n        title: this.state.reviewRating,\n        id: \"dropdown-size-medium\",\n        onSelect: function onSelect(eventKey, event) {\n          return _this7.handleOnSelectRating(eventKey, event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, React.createElement(Dropdown.Item, {\n        eventKey: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      }, \"1\"), React.createElement(Dropdown.Item, {\n        eventKey: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, \"2\"), React.createElement(Dropdown.Item, {\n        eventKey: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, \"3\"), React.createElement(Dropdown.Item, {\n        eventKey: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, \"4\"), React.createElement(Dropdown.Item, {\n        eventKey: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }, \"5\"))))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566\n        },\n        __self: this\n      }, \"Submit Review\"))));\n    }\n  }]);\n\n  return CleanerDetail;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pathname: state.router.location.pathname,\n    search: state.router.location.search,\n    hash: state.router.location.hash,\n    propertyList: state.property,\n    selectedOption: state.property.selectedOption,\n    inFlight: state.property.inFlight\n  };\n};\n\nexport default connect(mapStateToProps)(CleanerDetail);","map":{"version":3,"sources":["/Users/macconnolly/CS/bnbcleanings/src/components/cleanerDetail.js"],"names":["React","Component","CardColumns","Col","Image","ListGroup","Nav","Row","Tab","Modal","Button","Form","DropdownButton","Dropdown","Table","fetchAllProperties","updateSelectedMovie","createReview","connect","replace","push","Card","Container","Cookies","BootstrapTable","cellEditFactory","Type","CleanerDetail","props","handleOnSelectRating","eventKey","event","setState","reviewRating","console","log","state","handleOnChangeReviewBody","reviewBody","target","value","handleOnChangeSelectedOption","e","dispatch","handleShow","bind","getProperties","getAllCleaners","handleClose","lookupProperty","toggleBox","products","columns","dataField","text","editor","type","CHECKBOX","show","cleanings","isOpened","oldState","token","get","data","reviewScore","movieID","selectedOption","id","parameters","method","headers","property","fetch","then","response","JSON","stringify","json","parse","properties","hash","substr","currentCleanerID","getAllCleanings","getAllProperties","getCurrentCleanerInfo","getFutureCleanings","separator","newDate","Date","date","getDate","month","getMonth","year","getFullYear","getCurrentDate","cleaners","newProps","nextProps","nextState","currentPropertyID","m","propertyList","titles","_id","prevProps","prevState","currentCleaner","name","length","map","cleaning","index","now","toString","find","address","start","toLocaleDateString","end","cleaned","futureCleanings","mapStateToProps","pathname","router","location","search","inFlight"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SACIC,WADJ,EAEIC,GAFJ,EAGIC,KAHJ,EAIIC,SAJJ,EAKIC,GALJ,EAMIC,GANJ,EAOIC,GAPJ,EAQIC,KARJ,EASIC,MATJ,EAUIC,IAVJ,EAWIC,cAXJ,EAYIC,QAZJ,EAaIC,KAbJ,QAcO,iBAdP;AAeA,SAAQC,kBAAR,EAA4BC,mBAA5B,EAAiDC,YAAjD,QAAoE,yBAApE;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAASC,OAAT,EAAkBC,IAAlB,QAA8B,wBAA9B;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAO,YAAP;AACA,OAAO,gEAAP;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,eAAP,IAA0BC,IAA1B,QAAsC,+BAAtC;;IAMMC,a;;;;;AACF,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAEf,uFAAMA,KAAN;;AAFe,UAgDnBC,oBAhDmB,GAgDI,UAACC,QAAD,EAAWC,KAAX,EAAqB;AACxC,YAAKC,QAAL,CAAc;AACVC,QAAAA,YAAY,EAAEH;AADJ,OAAd;;AAGAI,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAa,MAAKC,KAAL,CAAWH,YAApC;AACH,KArDkB;;AAAA,UAuDnBI,wBAvDmB,GAuDM,UAACN,KAAD,EACzB;AACI,YAAKC,QAAL,CAAc;AAACM,QAAAA,UAAU,EAAEP,KAAK,CAACQ,MAAN,CAAaC;AAA1B,OAAd;;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAa,MAAKC,KAAL,CAAWE,UAApC;AACH,KA3DkB;;AAAA,UAuZnBG,4BAvZmB,GAuZY,UAACC,CAAD,EAAO;AAClCR,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBO,CAA/B;;AACA,YAAKd,KAAL,CAAWe,QAAX,CAAoB3B,mBAAmB,CAAC0B,CAAD,CAAvC;;AACA,YAAKd,KAAL,CAAWe,QAAX,CAAoBxB,OAAO,CAAC,mBAAmBuB,CAApB,CAA3B;AAEH,KA5ZkB;;AAIf,UAAKE,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,uDAAlB;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,uDAArB;AACA,UAAKE,cAAL,GAAsB,MAAKA,cAAL,CAAoBF,IAApB,uDAAtB;AAEA,UAAKG,WAAL,GAAmB,MAAKA,WAAL,CAAiBH,IAAjB,uDAAnB;AACA,UAAKI,cAAL,GAAsB,MAAKA,cAAL,CAAoBJ,IAApB,uDAAtB;AACA,UAAKK,SAAL,GAAiB,MAAKA,SAAL,CAAeL,IAAf,uDAAjB;AACA,QAAMM,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,CAAC;AACbC,MAAAA,SAAS,EAAE,cADE;AAEbC,MAAAA,IAAI,EAAE;AAFO,KAAD,EAGb;AACCD,MAAAA,SAAS,EAAE,WADZ;AAECC,MAAAA,IAAI,EAAE;AAFP,KAHa,EAMb;AACCD,MAAAA,SAAS,EAAE,SADZ;AAECC,MAAAA,IAAI,EAAE;AAFP,KANa,EASb;AACCD,MAAAA,SAAS,EAAE,SADZ;AAECC,MAAAA,IAAI,EAAE,QAFP;AAGCC,MAAAA,MAAM,EAAE;AACJC,QAAAA,IAAI,EAAE9B,IAAI,CAAC+B,QADP;AAEJjB,QAAAA,KAAK,EAAE;AAFH;AAHT,KATa,CAAhB;AAiBA,UAAKJ,KAAL,GAAa;AACTsB,MAAAA,IAAI,EAAE,KADG;AAETzB,MAAAA,YAAY,EAAE,eAFL;AAGTK,MAAAA,UAAU,EAAE,EAHH;AAITqB,MAAAA,SAAS,EAAE,EAJF;AAKTP,MAAAA,OAAO,EAAEA,OALA;AAMTQ,MAAAA,QAAQ,EAAE;AAND,KAAb;AA7Be;AAqClB,G,CAED;AACA;AACA;AACA;;;;;gCAEY;AACR,WAAK5B,QAAL,CAAc,UAAA6B,QAAQ;AAAA,eAAK;AAAED,UAAAA,QAAQ,EAAE,CAACC,QAAQ,CAACD;AAAtB,SAAL;AAAA,OAAtB;AACH;;;kCAea;AAEV,UAAIE,KAAK,GAAGvC,OAAO,CAACwC,GAAR,CAAY,OAAZ,CAAZ;AACA,UAAIC,IAAI,GAAG;AACP1B,QAAAA,UAAU,EAAE,KAAKF,KAAL,CAAWE,UADhB;AAEP2B,QAAAA,WAAW,EAAE,KAAK7B,KAAL,CAAWH,YAFjB;AAGPiC,QAAAA,OAAO,EAAE,KAAKtC,KAAL,CAAWuC;AAHb,OAAX;AAKA,WAAKvC,KAAL,CAAWe,QAAX,CAAoB1B,YAAY,CAAC+C,IAAD,EAAOF,KAAP,CAAhC;AACA,WAAK9B,QAAL,CAAc;AACV0B,QAAAA,IAAI,EAAE,KADI;AAEVzB,QAAAA,YAAY,EAAE,eAFJ;AAGVK,QAAAA,UAAU,EAAE;AAHF,OAAd;AAKA,WAAKV,KAAL,CAAWe,QAAX,CAAoB5B,kBAAkB,EAAtC;AAEH;;;iCAEY;AACT,WAAKiB,QAAL,CAAc;AAAE0B,QAAAA,IAAI,EAAE;AAAR,OAAd;AACH;;;mCAEcU,E,EAAG;AAEd,UAAMC,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,UAAIC,QAAQ,GAAG,EAAf;AACAC,MAAAA,KAAK,4CAAqCL,EAArC,GAA2CC,UAA3C,CAAL,CACKK,IADL,CACU,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,oDAAoDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAAhE;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJL,EAKKJ,IALL,CAKU,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,4CAA4CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAxD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmB2C,IAAI,CAACE,UAApC;AACAR,QAAAA,QAAQ,GAAGM,IAAI,CAACE,UAAhB;AACA,eAAOF,IAAP;AACH,OAXL;AAYA5C,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAaqC,QAAzB;AACAtC,MAAAA,OAAO,CAACC,GAAR,CAAYqC,QAAZ;AACA,aAAOA,QAAP;AAEH;;;yCACoB;AAEjB,UAAIS,IAAI,GAAG,KAAKrD,KAAL,CAAWqD,IAAX,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX;AACA,UAAIC,gBAAgB,GAAGF,IAAvB;AACA/C,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAW8C,IAAvB;AACA/C,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqBgD,gBAAjC,EALiB,CAOjB;AACA;AACA;AAEA;;AAKA,WAAKC,eAAL;AACA,WAAKC,gBAAL;AACA,WAAKtC,cAAL;AACA,WAAKuC,qBAAL;AACA,WAAKC,kBAAL;AAGArD,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAjB,EAxBiB,CA0BjB;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEH;;;mCAEc4D,S,EAAU;AAErB,UAAIC,OAAO,GAAG,IAAIC,IAAJ,EAAd;AACA,UAAIC,IAAI,GAAGF,OAAO,CAACG,OAAR,EAAX;AACA,UAAIC,KAAK,GAAGJ,OAAO,CAACK,QAAR,KAAqB,CAAjC;AACA,UAAIC,IAAI,GAAGN,OAAO,CAACO,WAAR,EAAX;AAEA,uBAAUD,IAAV,SAAiBP,SAAjB,SAA6BK,KAAK,GAAC,EAAN,cAAaA,KAAb,cAAwBA,KAAxB,CAA7B,SAA+DL,SAA/D,SAA2EG,IAA3E;AACH;;;sCAEgB;AAAA;;AACb,UAAIV,IAAI,GAAG,KAAKrD,KAAL,CAAWqD,IAAX,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX;AACA,UAAIC,gBAAgB,GAAGF,IAAvB,CAFa,CAIrB;;AACQ,UAAMZ,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,aAAOE,KAAK,0CAAmCU,gBAAnC,8BAAuE,KAAKc,cAAL,CAAoB,GAApB,CAAvE,kBAAuG,KAAKA,cAAL,CAAoB,GAApB,CAAvG,GAAmI5B,UAAnI,CAAL,CACFK,IADE,CACG,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,kDAAkDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAA9D;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJE,EAKFJ,IALE,CAKG,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAtD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAI,CAACkC,QAAjB;;AACA,QAAA,MAAI,CAAClE,QAAL,CAAc;AACV,uBAAagC,IAAI,CAACL,SADR;AAEV,uBAAawB;AAFH,SAAd;;AAMA,eAAOL,IAAP;AACH,OAhBE,CAAP;AAiBH;;;yCAEmB;AAAA;;AAChB,UAAIG,IAAI,GAAG,KAAKrD,KAAL,CAAWqD,IAAX,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX;AACA,UAAIC,gBAAgB,GAAGF,IAAvB,CAFgB,CAIxB;;AACQ,UAAMZ,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,aAAOE,KAAK,0CAAmCU,gBAAnC,8BAAuE,KAAKc,cAAL,CAAoB,GAApB,CAAvE,GAAmG5B,UAAnG,CAAL,CACFK,IADE,CACG,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,kDAAkDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAA9D;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJE,EAKFJ,IALE,CAKG,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAtD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAI,CAACkC,QAAjB;;AACA,QAAA,MAAI,CAAClE,QAAL,CAAc;AACV,6BAAmBgC,IAAI,CAACL;AADd,SAAd;;AAKA,eAAOmB,IAAP;AACH,OAfE,CAAP;AAgBH;;;uCAEiB;AAAA;;AAEd,UAAMT,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,aAAOE,KAAK,oDAAoDJ,UAApD,CAAL,CACFK,IADE,CACG,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,oDAAoDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAAhE;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJE,EAKFJ,IALE,CAKG,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAtD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAI,CAACkC,QAAjB;;AACA,QAAA,MAAI,CAAClE,QAAL,CAAc;AACV,wBAAcgC,IAAI,CAACgB;AADT,SAAd;;AAGA,eAAOF,IAAP;AACH,OAbE,CAAP;AAcH;;;qCAEe;AAAA;;AACZ,UAAMT,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,aAAOE,KAAK,CAAC,gCAAD,EAAmCJ,UAAnC,CAAL,CACFK,IADE,CACG,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,kDAAkDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAA9D;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJE,EAKFJ,IALE,CAKG,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAtD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAI,CAACkC,QAAjB;;AACA,QAAA,MAAI,CAAClE,QAAL,CAAc;AACV,sBAAYgC,IAAI,CAACkC;AADP,SAAd;;AAGA,eAAOpB,IAAP;AACH,OAbE,CAAP;AAcH;;;4CAEsB;AAAA;;AACnB,UAAIG,IAAI,GAAG,KAAKrD,KAAL,CAAWqD,IAAX,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX;AACA,UAAIC,gBAAgB,GAAGF,IAAvB;AAEA,UAAMZ,UAAU,GAAG;AACfC,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAFM,OAAnB;AAIA,aAAOE,KAAK,0CAAmCU,gBAAnC,GAAuDd,UAAvD,CAAL,CACFK,IADE,CACG,UAAAC,QAAQ,EAAI;AACdzC,QAAAA,OAAO,CAACC,GAAR,CAAY,kDAAkDyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAA9D;AACA,eAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,OAJE,EAKFJ,IALE,CAKG,UAAAI,IAAI,EAAI;AACV5C,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAA0CyC,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAtD;AACA,YAAId,IAAI,GAAGY,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAX,CAAX;AACA5C,QAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAI,CAACkC,QAAjB;;AACA,QAAA,MAAI,CAAClE,QAAL,CAAc;AACV,4BAAkBgC,IAAI,CAACkC,QAAL,CAAc,CAAd;AADR,SAAd;;AAGA,eAAOpB,IAAP;AACH,OAbE,CAAP;AAcH;;;8CAEyBqB,Q,EAAU;AAChC;AACAjE,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYgE,QAAZ,EAHgC,CAKhC;AACA;AACA;AAIH;;;wCAEmBC,S,EAAWC,S,EAAW;AACtCnE,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYiE,SAAZ,EAFsC,CAItC;AACA;AACA;AACA;;AAGA,UAAInB,IAAI,GAAG,KAAKrD,KAAL,CAAWqD,IAAX,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX;AACA,UAAIoB,iBAAiB,GAAG,KAAK1E,KAAL,CAAWuC,cAAnC;;AAEA,UAAGc,IAAI,KAAK,EAAT,IAAeqB,iBAAiB,IAAI,EAAvC,EAA0C;AACtC,YAAIC,CAAC,GAAGH,SAAS,CAACI,YAAV,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,GAAzC;AACAxE,QAAAA,OAAO,CAACC,GAAR,CAAYoE,CAAZ;AACA,aAAK9D,4BAAL,CAAkC8D,CAAlC;AACH,OAjBqC,CAmBtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEH;;;uCACkBI,S,EAAWC,S,EAAW,CACrC;AACA;AAKH;;;2CACsB;AACnB1E,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAjB;AAEH,K,CAED;AACA;AACA;AACA;AACA;AACA;AACA;;;;oCAEe,CACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH;;;wCAEmB;AAIhBM,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EALgB,CAMhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AAEA;AAEH;;;AAOD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;6BAMS;AAAA;;AAEL,aAEI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAII,oBAAC,GAAD,CAAK,SAAL;AAAe,QAAA,EAAE,EAAC,YAAlB;AAA+B,QAAA,gBAAgB,EAAC,GAAhD;AAAoD,QAAA,SAAS,EAAE,KAAKR,KAAL,CAAWuC,cAA1E;AACe,QAAA,YAAY,EAAE,KAD7B;AACoC,QAAA,QAAQ,EAAE,kBAACzB,CAAD;AAAA,iBAAO,MAAI,CAACD,4BAAL,CAAkCC,CAAlC,CAAP;AAAA,SAD9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,KAAKN,KAAL,CAAWyE,cAAX,IAA6B,KAAKzE,KAAL,CAAWuB,SAAxC,IAAqD,KAAKvB,KAAL,CAAW8D,QAAjE,IACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAQ,KAAK9D,KAAL,CAAWyE,cAAX,CAA0BC,IAAlC,MADA,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAe,KAAK1E,KAAL,CAAWuB,SAAX,CAAqBoD,MAApC,OAA6C,KAAK3E,KAAL,CAAWuB,SAAX,CAAqBoD,MAArB,KAAgC,CAAhC,GAAoC,UAApC,GAAiD,YAA9F,oBAHJ,CAFJ,EAUU,KAAK3E,KAAL,CAAWuB,SAAX,IAAwB,KAAKvB,KAAL,CAAW4C,UAAnC,IAAiD,KAAK5C,KAAL,CAAW8D,QAA7D,IACD,KAAK9D,KAAL,CAAWuB,SAAX,CAAqBqD,GAArB,CAAyB,UAACC,QAAD,EAAWC,KAAX;AAAA,eACrB,0CACA,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKxB,IAAI,CAACyB,GAAL,GAAWC,QAAX,EADL,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAH,OAA2B,MAAI,CAAChF,KAAL,CAAW4C,UAAX,CAAsBqC,IAAtB,CAA2B,UAAA7C,QAAQ;AAAA,iBAAIA,QAAQ,CAACkC,GAAT,KAAiBO,QAAQ,CAACzC,QAA9B;AAAA,SAAnC,EAA2EsC,IAAtG,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,OAA8B,MAAI,CAAC1E,KAAL,CAAW4C,UAAX,CAAsBqC,IAAtB,CAA2B,UAAA7C,QAAQ;AAAA,iBAAIA,QAAQ,CAACkC,GAAT,KAAiBO,QAAQ,CAACzC,QAA9B;AAAA,SAAnC,EAA2E8C,OAAzG,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAH,OAAoC,IAAI5B,IAAJ,CAASuB,QAAQ,CAACM,KAAlB,EAAyBC,kBAAzB,EAApC,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAH,OAA+C,IAAI9B,IAAJ,CAASuB,QAAQ,CAACQ,GAAlB,EAAuBD,kBAAvB,EAA/C,CALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAH,OAAqCP,QAAQ,CAACS,OAAT,GAAmB,OAAnB,GAA6B,WAAlE,CANJ,CADA,EAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAXA,CADqB;AAAA,OAAzB,CAXR,EA6BI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,SAAS,EAAC,UAAjC;AAA4C,QAAA,OAAO,EAAE,KAAKxE,SAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCA7BJ,EAgCM,KAAKd,KAAL,CAAWuF,eAAX,IAA8B,KAAKvF,KAAL,CAAW4C,UAAzC,IAAuD,KAAK5C,KAAL,CAAW8D,QAAlE,IAA8E,KAAK9D,KAAL,CAAWwB,QAA1F,IACD,KAAKxB,KAAL,CAAWuF,eAAX,CAA2BX,GAA3B,CAA+B,UAACC,QAAD,EAAWC,KAAX;AAAA,eAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKxB,IAAI,CAACyB,GAAL,GAAWC,QAAX,EADL,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAH,OAA2B,MAAI,CAAChF,KAAL,CAAW4C,UAAX,CAAsBqC,IAAtB,CAA2B,UAAA7C,QAAQ;AAAA,iBAAIA,QAAQ,CAACkC,GAAT,KAAiBO,QAAQ,CAACzC,QAA9B;AAAA,SAAnC,EAA2EsC,IAAtG,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,OAA8B,MAAI,CAAC1E,KAAL,CAAW4C,UAAX,CAAsBqC,IAAtB,CAA2B,UAAA7C,QAAQ;AAAA,iBAAIA,QAAQ,CAACkC,GAAT,KAAiBO,QAAQ,CAACzC,QAA9B;AAAA,SAAnC,EAA2E8C,OAAzG,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAH,OAAoC,IAAI5B,IAAJ,CAASuB,QAAQ,CAACM,KAAlB,EAAyBC,kBAAzB,EAApC,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAH,OAA+C,IAAI9B,IAAJ,CAASuB,QAAQ,CAACQ,GAAlB,EAAuBD,kBAAvB,EAA/C,CALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAH,OAAqCP,QAAQ,CAACS,OAAT,GAAmB,OAAnB,GAA6B,WAAlE,CANJ,CADJ,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAXJ,CAD2B;AAAA,OAA/B,CAjCJ,CADJ,CAFJ,CAJJ,EAmEI,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKtF,KAAL,CAAWsB,IAAxB;AAA8B,QAAA,MAAM,EAAE,KAAKV,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,CADJ,EAII,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,oBAAC,IAAD,CAAM,KAAN;AAAY,QAAA,EAAE,EAAE7C,GAAhB;AAAqB,QAAA,SAAS,EAAC,uBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,EAEI,oBAAC,IAAD,CAAM,OAAN;AAAc,QAAA,QAAQ,EAAE,kBAACuC,CAAD;AAAA,iBAAO,MAAI,CAACL,wBAAL,CAA8BK,CAA9B,CAAP;AAAA,SAAxB;AAAiE,QAAA,IAAI,EAAC,MAAtE;AACc,QAAA,EAAE,EAAC,YADjB;AAC8B,QAAA,EAAE,EAAC,UADjC;AAC4C,QAAA,IAAI,EAAC,GADjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAFJ,EAOI,oBAAC,IAAD,CAAM,KAAN;AAAY,QAAA,EAAE,EAAEvC,GAAhB;AAAqB,QAAA,SAAS,EAAC,mBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI,oBAAC,cAAD;AAEI,QAAA,KAAK,EAAE,KAAKiC,KAAL,CAAWH,YAFtB;AAGI,QAAA,EAAE,EAAC,sBAHP;AAII,QAAA,QAAQ,EAAE,kBAACH,QAAD,EAAWC,KAAX;AAAA,iBAAqB,MAAI,CAACF,oBAAL,CAA0BC,QAA1B,EAAoCC,KAApC,CAArB;AAAA,SAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI,oBAAC,QAAD,CAAU,IAAV;AAAe,QAAA,QAAQ,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aANJ,EAOI,oBAAC,QAAD,CAAU,IAAV;AAAe,QAAA,QAAQ,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAPJ,EAQI,oBAAC,QAAD,CAAU,IAAV;AAAe,QAAA,QAAQ,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARJ,EASI,oBAAC,QAAD,CAAU,IAAV;AAAe,QAAA,QAAQ,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aATJ,EAUI,oBAAC,QAAD,CAAU,IAAV;AAAe,QAAA,QAAQ,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAVJ,CAFJ,CAPJ,CADJ,CAJJ,EA8BI,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,OAAO,EAAE,KAAKiB,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAII,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,SAAhB;AAA0B,QAAA,OAAO,EAAE,KAAKA,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAJJ,CA9BJ,CAnEJ,CAFJ;AA+GH;;;;EA9hBuB/C,S;;AAkiB5B,IAAM2H,eAAe,GAAG,SAAlBA,eAAkB,CAAAxF,KAAK;AAAA,SAAK;AAC9ByF,IAAAA,QAAQ,EAAEzF,KAAK,CAAC0F,MAAN,CAAaC,QAAb,CAAsBF,QADF;AAE9BG,IAAAA,MAAM,EAAE5F,KAAK,CAAC0F,MAAN,CAAaC,QAAb,CAAsBC,MAFA;AAG9B/C,IAAAA,IAAI,EAAE7C,KAAK,CAAC0F,MAAN,CAAaC,QAAb,CAAsB9C,IAHE;AAI9BuB,IAAAA,YAAY,EAAEpE,KAAK,CAACoC,QAJU;AAK9BL,IAAAA,cAAc,EAAE/B,KAAK,CAACoC,QAAN,CAAeL,cALD;AAM9B8D,IAAAA,QAAQ,EAAE7F,KAAK,CAACoC,QAAN,CAAeyD;AANK,GAAL;AAAA,CAA7B;;AASA,eAAe/G,OAAO,CAAC0G,eAAD,CAAP,CAAyBjG,aAAzB,CAAf","sourcesContent":["import React, {Component} from 'react';\nimport {\n    CardColumns,\n    Col,\n    Image,\n    ListGroup,\n    Nav,\n    Row,\n    Tab,\n    Modal,\n    Button,\n    Form,\n    DropdownButton,\n    Dropdown,\n    Table\n} from 'react-bootstrap';\nimport {fetchAllProperties, updateSelectedMovie, createReview} from '../actions/movieActions';\nimport {connect} from \"react-redux\";\nimport { replace, push } from 'connected-react-router'\nimport Card from \"react-bootstrap/Card\";\nimport Container from \"react-bootstrap/Container\";\nimport Cookies from 'js-cookie';\nimport '../App.css'\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\n\n\n\n\n\nclass CleanerDetail extends Component {\n    constructor(props) {\n\n        super(props);\n\n        this.handleShow = this.handleShow.bind(this);\n        this.getProperties = this.getProperties.bind(this);\n        this.getAllCleaners = this.getAllCleaners.bind(this);\n\n        this.handleClose = this.handleClose.bind(this);\n        this.lookupProperty = this.lookupProperty.bind(this);\n        this.toggleBox = this.toggleBox.bind(this);\n        const products = [];\n        const columns = [{\n            dataField: 'propertyName',\n            text: 'Name'\n        }, {\n            dataField: 'startDate',\n            text: 'Start'\n        }, {\n            dataField: 'endDate',\n            text: 'Deadline'\n        }, {\n            dataField: 'cleaned',\n            text: 'Status',\n            editor: {\n                type: Type.CHECKBOX,\n                value: 'true:false'\n            }\n        }];\n        this.state = {\n            show: false,\n            reviewRating: 'Select rating',\n            reviewBody: '',\n            cleanings: [],\n            columns: columns,\n            isOpened: false\n        };\n    }\n\n    // handleSelect(key) {\n    //     console.log('selected' + key);\n    //     this.setState({ key: key });\n    // }\n\n    toggleBox() {\n        this.setState(oldState => ({ isOpened: !oldState.isOpened }));\n    }\n\n    handleOnSelectRating = (eventKey, event) => {\n        this.setState({\n            reviewRating: eventKey\n        });\n        console.log('rating: ' + this.state.reviewRating);\n    };\n\n    handleOnChangeReviewBody=(event)=>\n    {\n        this.setState({reviewBody: event.target.value});\n        console.log('review: ' + this.state.reviewBody);\n    };\n\n    handleClose() {\n\n        let token = Cookies.get('token');\n        var data = {\n            reviewBody: this.state.reviewBody,\n            reviewScore: this.state.reviewRating,\n            movieID: this.props.selectedOption\n        };\n        this.props.dispatch(createReview(data, token));\n        this.setState({\n            show: false,\n            reviewRating: 'Select rating',\n            reviewBody: ''});\n\n        this.props.dispatch(fetchAllProperties());\n\n    }\n\n    handleShow() {\n        this.setState({ show: true });\n    }\n\n    lookupProperty(id){\n\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        let property = {}\n        fetch(`http://localhost:8080/properties/${id}`, parameters)\n            .then(response => {\n                console.log('properties fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('properties fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log('this is my ref' + json.properties)\n                property = json.properties;\n                return json;\n            });\n        console.log('property' + property)\n        console.log(property)\n        return property\n\n    }\n    componentWillMount() {\n\n        let hash = this.props.hash.substr(2);\n        let currentCleanerID = hash;\n        console.log('hash: ' + hash);\n        console.log('selectedOption: ' + currentCleanerID);\n\n        // if (this.props.hash !== \"\" && currentCleanerID === \"\"){\n        //     this.props.dispatch(updateSelectedMovie(hash));\n        // }\n\n        // this.props.dispatch(fetchAllProperties());\n\n\n\n\n        this.getAllCleanings();\n        this.getAllProperties();\n        this.getAllCleaners();\n        this.getCurrentCleanerInfo();\n        this.getFutureCleanings();\n\n\n        console.log('comp will mount cleanerdetail')\n        console.log(this.props);\n\n        //\n        // console.log('Component WILL MOUNT!');\n        // console.log('hash: ' + this.props.hash)\n        // console.log('selected option: ' + this.props.selectedOption);\n        // //this.props.dispatch(fetchAllProperties(checkCookie()));\n        // console.log('selected option: ' + this.props.selectedOption);\n\n\n        // if(this.props.selectedOption === \"\"){\n        //\n        //     this.props.dispatch(fetchAllProperties(checkCookie()));\n        //     this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)));\n        // }\n        // else {\n        //\n        //     this.props.dispatch(updateSelectedMovie(this.props.selectedOption));\n        //\n        // }\n        //updateSelectedMovie(this.props.hash.substr(2));\n        // console.log('selected option: ' + this.props.selectedOption);\n        //\n\n        //this.props.dispatch(fetchAllProperties(checkCookie()));\n\n    }\n\n    getCurrentDate(separator){\n\n        let newDate = new Date()\n        let date = newDate.getDate();\n        let month = newDate.getMonth() + 1;\n        let year = newDate.getFullYear();\n\n        return `${year}${separator}${month<10?`0${month}`:`${month}`}${separator}${date}`\n    }\n\n    getAllCleanings(){\n        let hash = this.props.hash.substr(2);\n        let currentCleanerID = hash;\n\n//?start=${this.getCurrentDate('-')}&end=${this.getCurrentDate('-')}\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        return fetch(`http://localhost:8080/cleaners/${currentCleanerID}/cleanings?start=${this.getCurrentDate('-')}&end=${this.getCurrentDate('-')}`, parameters)\n            .then(response => {\n                console.log('cleaners fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('cleaners fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log(data.cleaners);\n                this.setState({\n                    \"cleanings\": data.cleanings,\n                    \"cleanerID\": currentCleanerID,\n\n                });\n\n                return json;\n            });\n    }\n\n    getFutureCleanings(){\n        let hash = this.props.hash.substr(2);\n        let currentCleanerID = hash;\n\n//?start=${this.getCurrentDate('-')}&end=${this.getCurrentDate('-')}\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        return fetch(`http://localhost:8080/cleaners/${currentCleanerID}/cleanings?start=${this.getCurrentDate('-')}`, parameters)\n            .then(response => {\n                console.log('cleaners fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('cleaners fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log(data.cleaners);\n                this.setState({\n                    \"futureCleanings\": data.cleanings\n\n                });\n\n                return json;\n            });\n    }\n\n    getAllProperties(){\n\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        return fetch(`http://localhost:8080/properties?cleanings=true`, parameters)\n            .then(response => {\n                console.log('properties fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('cleaners fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log(data.cleaners);\n                this.setState({\n                    \"properties\": data.properties\n                });\n                return json;\n            });\n    }\n\n    getAllCleaners(){\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        return fetch('http://localhost:8080/cleaners', parameters)\n            .then(response => {\n                console.log('property fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('property fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log(data.cleaners);\n                this.setState({\n                    \"cleaners\": data.cleaners\n                });\n                return json;\n            });\n    }\n\n    getCurrentCleanerInfo(){\n        let hash = this.props.hash.substr(2);\n        let currentCleanerID = hash;\n\n        const parameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json'\n            }};\n        return fetch(`http://localhost:8080/cleaners/${currentCleanerID}`, parameters)\n            .then(response => {\n                console.log('property fetch callback json first response: ' + JSON.stringify(response));\n                return response.json();\n            })\n            .then(json => {\n                console.log('property fetch callback json response' + JSON.stringify(json));\n                let data = JSON.parse(JSON.stringify(json));\n                console.log(data.cleaners);\n                this.setState({\n                    \"currentCleaner\": data.cleaners[0]\n                });\n                return json;\n            });\n    }\n\n    componentWillReceiveProps(newProps) {\n        //console.log('comp will receive props: ' )\n        console.log('willReceiveProps')\n        console.log(newProps)\n\n        //var newPropsObject = JSON.parse(newProps);\n        //var result = newPropsObject[0];\n        //console.log(JSON.parse(newProps))\n\n\n\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n        console.log('comp will update')\n        console.log(nextProps)\n\n        //this.handleOnChangeSelectedOption(this.props.hash.substr(2))\n        // if(this.props.selectedOption === \"\"){\n        //     this.props.dispatch(updateSelectedMovie(nextProps.propertyList.titles[0]._id));\n        // }\n\n\n        let hash = this.props.hash.substr(2);\n        let currentPropertyID = this.props.selectedOption;\n\n        if(hash === '' && currentPropertyID == ''){\n            let m = nextProps.propertyList.titles[0]._id\n            console.log(m)\n            this.handleOnChangeSelectedOption(m);\n        }\n\n        //const firstMovie = JSON.parse(nextProps.propertyList[0]._id)\n        //this.handleOnChangeSelectedOption(firstMovie)\n        // console.log('comp will update')\n        // if(this.props.selectedOption === '') {\n        //     let firstMovie = nextProps.propertyList[0]._id\n        //     this.handleOnChangeSelectedOption(firstMovie);\n        // }\n\n    }\n    componentDidUpdate(prevProps, prevState) {\n        // updateSelectedMovie(prevProps.hash.substr(2))\n        // console.log('new debug')\n\n\n\n\n    }\n    componentWillUnmount() {\n        console.log('comp will unmount')\n        console.log(this.props)\n\n    }\n\n    // handleOnLoadMovies = (token) => {\n    //     this.handleOnChangeSelectedOption(this.props.selectedOption || this.props.hash.substr(2));\n    //     this.props.dispatch(fetchAllProperties(token));\n    //\n    //\n    //\n    // };\n\n    getProperties(){\n        // // if (this.state.cleanings !== undefined && this.state.properties !== undefined) {\n        // //\n        // //\n        // //     let newCleanings = this.state.cleanings.map(obj=> (\n        // //         { ...obj, propertyName: this.state.properties.find( property => property._id === obj.property ).name }\n        // //     ));\n        // //     newCleanings = newCleanings.map(obj=> (\n        // //         { ...obj, endDate: new Date(obj.end).toLocaleDateString() }\n        // //     ));\n        // //     newCleanings = newCleanings.map(obj=> (\n        // //         { ...obj, startDate: new Date(obj.start).toLocaleDateString() }\n        // //     ));\n        // //\n        // //\n        // //\n        // //     return newCleanings;\n        //\n        // }\n        // else\n        //     return []\n\n    }\n\n    componentDidMount() {\n\n\n\n        console.log('comp did mount state');\n        console.log(this.state);\n        // console.log(this.props);\n        // this.props.dispatch(fetchAllProperties());\n        //\n        // let hash = this.props.hash.substr(2);\n        // let currentPropertyID = this.props.selectedOption;\n        //\n        // if(hash === '' && currentPropertyID == ''){\n        //     let m = this.propertyList.titles[0]._id\n        //     console.log(m)\n        //     this.handleOnChangeSelectedOption(m);\n        // }\n\n        //this.props.dispatch(fetchAllProperties(checkCookie()));\n        //this.props.dispatch(updateSelectedMovie(this.props.selectedOption));\n\n\n        //this.props.dispatch(replace('/movies/#/' + this.props.selectedOption));\n\n        //console.log('comp did mount')\n\n        //this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)));\n\n    }\n    handleOnChangeSelectedOption = (e) => {\n        console.log('value of e is ' + e);\n        this.props.dispatch(updateSelectedMovie(e));\n        this.props.dispatch(replace('/properties/#/' + e));\n\n    };\n    // handleOnLoadMovies = (token) => {\n    //     this.props.dispatch(fetchAllProperties(token)).then((response) => {\n    //         console.log('MOVIES RETURNED - UPDATE STATE' + response);\n    //         this.props.dispatch(updateSelectedMovie(this.props.hash.substr(2)))\n    //\n    //     }).catch((error) => {\n    //         console.log('ERROR')\n    //     }));\n    //\n    // };\n\n\n\n\n\n    render() {\n\n        return (\n\n            <Container className='movie-list-tabbed'>\n                {/*{*/}\n                {/*(this.props.inFlight ? 'loading' : '')*/}\n                {/*}*/}\n                <Tab.Container id=\"moviestabs\" defaultActiveKey='a' activeKey={this.props.selectedOption}\n                               mountOnEnter={false} onSelect={(e) => this.handleOnChangeSelectedOption(e)}>\n                    <Row>\n                        <Col md={9}>\n                            {(this.state.currentCleaner && this.state.cleanings && this.state.cleaners) &&\n                            <div>\n                            <h3>Hi {this.state.currentCleaner.name}!</h3>\n\n                                <h4> You have {this.state.cleanings.length} {this.state.cleanings.length === 1 ? 'property' : 'properties'} to clean today</h4>\n                            </div>\n                            }\n\n\n                                {(this.state.cleanings && this.state.properties && this.state.cleaners) &&\n                                this.state.cleanings.map((cleaning, index) => (\n                                    <>\n                                    <Card body>\n                                        {Date.now().toString()}\n                                        <p><strong>Name:</strong> {this.state.properties.find(property => property._id === cleaning.property).name}</p>\n                                        <p><strong>Address:</strong> {this.state.properties.find(property => property._id === cleaning.property).address}</p>\n                                        <p><strong>Date to Clean:</strong> {new Date(cleaning.start).toLocaleDateString()}</p>\n                                        <p><strong>Latest Cleaning Deadline:</strong> {new Date(cleaning.end).toLocaleDateString()}</p>\n                                        <p><strong>Current Status:</strong> {cleaning.cleaned ? 'Clean' : 'Not Clean'}</p>\n\n\n                                    </Card>\n                                    <br/>\n\n                                    </>\n\n                                ))\n                                }\n                            <Button type='primary' className=\"boxTitle\" onClick={this.toggleBox}>\n                                Show/Hide Future Cleanings\n                            </Button>\n                            {(this.state.futureCleanings && this.state.properties && this.state.cleaners && this.state.isOpened) &&\n                            this.state.futureCleanings.map((cleaning, index) => (\n                                <div>\n                                    <Card body>\n                                        {Date.now().toString()}\n                                        <p><strong>Name:</strong> {this.state.properties.find(property => property._id === cleaning.property).name}</p>\n                                        <p><strong>Address:</strong> {this.state.properties.find(property => property._id === cleaning.property).address}</p>\n                                        <p><strong>Date to Clean:</strong> {new Date(cleaning.start).toLocaleDateString()}</p>\n                                        <p><strong>Latest Cleaning Deadline:</strong> {new Date(cleaning.end).toLocaleDateString()}</p>\n                                        <p><strong>Current Status:</strong> {cleaning.cleaned ? 'Clean' : 'Not Clean'}</p>\n\n\n                                    </Card>\n                                    <br/>\n\n                                </div>\n\n                            ))\n                            }\n                                {/*{ this.state.cleanings &&*/}\n                                {/*<BootstrapTable keyField='_id' data={ this.getProperties() } columns={ this.state.columns } cellEdit={ cellEditFactory({ mode: 'click', blurToSave: true }) } />*/}\n                                {/*}*/}\n\n\n\n                        </Col>\n                    </Row>\n                </Tab.Container>\n                <Modal show={this.state.show} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Create Review</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form>\n\n                            <Form.Group as={Col} controlId=\"reviewForm.reviewBody\">\n                                <Form.Label>Movie Review</Form.Label>\n                                <Form.Control onChange={(e) => this.handleOnChangeReviewBody(e)} type=\"text\"\n                                              id=\"reviewBody\" as=\"textarea\" rows=\"3\"/>\n                            </Form.Group>\n                            <Form.Group as={Col} controlId=\"reviewForm.rating\">\n                                <Form.Label>Rating</Form.Label>\n                                <DropdownButton\n\n                                    title={this.state.reviewRating}\n                                    id=\"dropdown-size-medium\"\n                                    onSelect={(eventKey, event) => this.handleOnSelectRating(eventKey, event)}\n                                >\n                                    <Dropdown.Item eventKey=\"1\">1</Dropdown.Item>\n                                    <Dropdown.Item eventKey=\"2\">2</Dropdown.Item>\n                                    <Dropdown.Item eventKey=\"3\">3</Dropdown.Item>\n                                    <Dropdown.Item eventKey=\"4\">4</Dropdown.Item>\n                                    <Dropdown.Item eventKey=\"5\">5</Dropdown.Item>\n                                </DropdownButton>\n                            </Form.Group>\n\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={this.handleClose}>\n                            Close\n                        </Button>\n                        <Button variant=\"primary\" onClick={this.handleClose}>\n                            Submit Review\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </Container>\n\n    );\n    }\n}\n\n\nconst mapStateToProps = state => ({\n    pathname: state.router.location.pathname,\n    search: state.router.location.search,\n    hash: state.router.location.hash,\n    propertyList: state.property,\n    selectedOption: state.property.selectedOption,\n    inFlight: state.property.inFlight,\n});\n\nexport default connect(mapStateToProps)(CleanerDetail)\n\n\n"]},"metadata":{},"sourceType":"module"}